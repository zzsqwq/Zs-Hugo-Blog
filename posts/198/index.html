<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>利用树莓派为HP LaserJet 1020配置无线打印功能 | Zs's Blog</title>
<meta name=keywords content="树莓派,HP LaserJet,打印机"><meta name=description content="前言
最近基地的打印机突然又好起来了。
因为基地的打印机型号比较老——HP LaserJet 1020，没有无线打印的功能。所以之前一位学长1 用树莓派配置了打印机的无线打印功能，但是后来发现有一些问题，有时候发送打印请求树莓派无法接收，而且不知道为何，学长之前用的是树莓派自己创建WiFi，连接对应WiFi才能打印，但是这个显然不是最优的解决办法。
考虑到之间已经配置好基地WiFi，我决定重新配置一下打印功能，使其连接基地WiFi即可实现局域网打印。

配置过程
查看树莓派内容
通过ssh连接树莓派，发现里面除了Github上的一个开源项目create_ap ，就没有什么其他的内容了，连接屏幕后发现没有任何图像信号，无从下手，因此考虑重新刷机。

对树莓派进行刷机
把数据备份了一下，看了一下树莓派版本是2015年生产的 Raspberry Pi 3 model B V1.2 ，是老古董了。
去官网看了一下，因为我对Ubuntu比较熟悉，我计划安装一个 Ubuntu20.04版本的，考虑到版本比较老，就装了server版本的，相比与desktop版本负担更小一些。
其实就是下一个官方的软件，Raspberry Pi Imager ，直接用读卡器对树莓派的存储卡刷机即可。
这里是对应的镜像以及教程： 镜像下载   安装教程

配置网络相关
Ubuntu的server版本有个比较蛋疼的问题就是上网比较困难，如果是用的学校网线，必须要PPPOE拨号才能上网，但是server版本居然没有 net-tools 和 network-manager ，连接WiFi啥的试了很多办法但还是没有什么作用。
解决办法：用网线直接连接树莓派和有网的路由器，安装 net-tools 和 network-manager ，执行
$ sudo nmtui
选择 Activate a connect  连接无线的WiFi，执行
$ sudo ifconfig
查看WiFi对应的IP，至此，树莓派可以摆脱屏幕，我们可以使用电脑进行使用 ssh 连接。
这里也可以使用网线进行连接，具体操作如下


用网线连接树莓派和自己的电脑。


在树莓派的利用 nmtui 选择 Edit a connection  ，Add一个Ethernet connect，对IPv4 CONFIGURATION进行设置，首先讲 Automatic 设置为 Manual，设置 Address 为 静态IP 如 192.168.3.2 ，Gateway 设置为 192.168.3.1 。"><meta name=author content="zzsqwq"><link rel=canonical href=https://blog.zzsqwq.cn/posts/198/><meta name=google-site-verification content="G-WF7TH97J9X"><link crossorigin=anonymous href=/assets/css/stylesheet.fc220c15db4aef0318bbf30adc45d33d4d7c88deff3238b23eb255afdc472ca6.css integrity="sha256-/CIMFdtK7wMYu/MK3EXTPU18iN7/MjiyPrJVr9xHLKY=" rel="preload stylesheet" as=style><link rel=icon href=https://blog.zzsqwq.cn/images/avatar.png><link rel=icon type=image/png sizes=16x16 href=https://blog.zzsqwq.cn/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.zzsqwq.cn/images/favicon-32x32.ico><link rel=apple-touch-icon href=https://blog.zzsqwq.cn/apple-touch-icon.png><link rel=mask-icon href=https://blog.zzsqwq.cn/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://blog.zzsqwq.cn/posts/198/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-WF7TH97J9X"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-WF7TH97J9X")}</script><meta property="og:title" content="利用树莓派为HP LaserJet 1020配置无线打印功能"><meta property="og:description" content="前言
最近基地的打印机突然又好起来了。
因为基地的打印机型号比较老——HP LaserJet 1020，没有无线打印的功能。所以之前一位学长1 用树莓派配置了打印机的无线打印功能，但是后来发现有一些问题，有时候发送打印请求树莓派无法接收，而且不知道为何，学长之前用的是树莓派自己创建WiFi，连接对应WiFi才能打印，但是这个显然不是最优的解决办法。
考虑到之间已经配置好基地WiFi，我决定重新配置一下打印功能，使其连接基地WiFi即可实现局域网打印。

配置过程
查看树莓派内容
通过ssh连接树莓派，发现里面除了Github上的一个开源项目create_ap ，就没有什么其他的内容了，连接屏幕后发现没有任何图像信号，无从下手，因此考虑重新刷机。

对树莓派进行刷机
把数据备份了一下，看了一下树莓派版本是2015年生产的 Raspberry Pi 3 model B V1.2 ，是老古董了。
去官网看了一下，因为我对Ubuntu比较熟悉，我计划安装一个 Ubuntu20.04版本的，考虑到版本比较老，就装了server版本的，相比与desktop版本负担更小一些。
其实就是下一个官方的软件，Raspberry Pi Imager ，直接用读卡器对树莓派的存储卡刷机即可。
这里是对应的镜像以及教程： 镜像下载   安装教程

配置网络相关
Ubuntu的server版本有个比较蛋疼的问题就是上网比较困难，如果是用的学校网线，必须要PPPOE拨号才能上网，但是server版本居然没有 net-tools 和 network-manager ，连接WiFi啥的试了很多办法但还是没有什么作用。
解决办法：用网线直接连接树莓派和有网的路由器，安装 net-tools 和 network-manager ，执行
$ sudo nmtui
选择 Activate a connect  连接无线的WiFi，执行
$ sudo ifconfig
查看WiFi对应的IP，至此，树莓派可以摆脱屏幕，我们可以使用电脑进行使用 ssh 连接。
这里也可以使用网线进行连接，具体操作如下


用网线连接树莓派和自己的电脑。


在树莓派的利用 nmtui 选择 Edit a connection  ，Add一个Ethernet connect，对IPv4 CONFIGURATION进行设置，首先讲 Automatic 设置为 Manual，设置 Address 为 静态IP 如 192.168.3.2 ，Gateway 设置为 192.168.3.1 。"><meta property="og:type" content="article"><meta property="og:url" content="https://blog.zzsqwq.cn/posts/198/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-07-18T16:03:00+00:00"><meta property="article:modified_time" content="2021-07-18T16:03:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="利用树莓派为HP LaserJet 1020配置无线打印功能"><meta name=twitter:description content="前言
最近基地的打印机突然又好起来了。
因为基地的打印机型号比较老——HP LaserJet 1020，没有无线打印的功能。所以之前一位学长1 用树莓派配置了打印机的无线打印功能，但是后来发现有一些问题，有时候发送打印请求树莓派无法接收，而且不知道为何，学长之前用的是树莓派自己创建WiFi，连接对应WiFi才能打印，但是这个显然不是最优的解决办法。
考虑到之间已经配置好基地WiFi，我决定重新配置一下打印功能，使其连接基地WiFi即可实现局域网打印。

配置过程
查看树莓派内容
通过ssh连接树莓派，发现里面除了Github上的一个开源项目create_ap ，就没有什么其他的内容了，连接屏幕后发现没有任何图像信号，无从下手，因此考虑重新刷机。

对树莓派进行刷机
把数据备份了一下，看了一下树莓派版本是2015年生产的 Raspberry Pi 3 model B V1.2 ，是老古董了。
去官网看了一下，因为我对Ubuntu比较熟悉，我计划安装一个 Ubuntu20.04版本的，考虑到版本比较老，就装了server版本的，相比与desktop版本负担更小一些。
其实就是下一个官方的软件，Raspberry Pi Imager ，直接用读卡器对树莓派的存储卡刷机即可。
这里是对应的镜像以及教程： 镜像下载   安装教程

配置网络相关
Ubuntu的server版本有个比较蛋疼的问题就是上网比较困难，如果是用的学校网线，必须要PPPOE拨号才能上网，但是server版本居然没有 net-tools 和 network-manager ，连接WiFi啥的试了很多办法但还是没有什么作用。
解决办法：用网线直接连接树莓派和有网的路由器，安装 net-tools 和 network-manager ，执行
$ sudo nmtui
选择 Activate a connect  连接无线的WiFi，执行
$ sudo ifconfig
查看WiFi对应的IP，至此，树莓派可以摆脱屏幕，我们可以使用电脑进行使用 ssh 连接。
这里也可以使用网线进行连接，具体操作如下


用网线连接树莓派和自己的电脑。


在树莓派的利用 nmtui 选择 Edit a connection  ，Add一个Ethernet connect，对IPv4 CONFIGURATION进行设置，首先讲 Automatic 设置为 Manual，设置 Address 为 静态IP 如 192.168.3.2 ，Gateway 设置为 192.168.3.1 。"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.zzsqwq.cn/posts/"},{"@type":"ListItem","position":2,"name":"利用树莓派为HP LaserJet 1020配置无线打印功能","item":"https://blog.zzsqwq.cn/posts/198/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"利用树莓派为HP LaserJet 1020配置无线打印功能","name":"利用树莓派为HP LaserJet 1020配置无线打印功能","description":"前言 最近基地的打印机突然又好起来了。\n因为基地的打印机型号比较老——HP LaserJet 1020，没有无线打印的功能。所以之前一位学长1 用树莓派配置了打印机的无线打印功能，但是后来发现有一些问题，有时候发送打印请求树莓派无法接收，而且不知道为何，学长之前用的是树莓派自己创建WiFi，连接对应WiFi才能打印，但是这个显然不是最优的解决办法。\n考虑到之间已经配置好基地WiFi，我决定重新配置一下打印功能，使其连接基地WiFi即可实现局域网打印。\n配置过程 查看树莓派内容 通过ssh连接树莓派，发现里面除了Github上的一个开源项目create_ap ，就没有什么其他的内容了，连接屏幕后发现没有任何图像信号，无从下手，因此考虑重新刷机。\n对树莓派进行刷机 把数据备份了一下，看了一下树莓派版本是2015年生产的 Raspberry Pi 3 model B V1.2 ，是老古董了。\n去官网看了一下，因为我对Ubuntu比较熟悉，我计划安装一个 Ubuntu20.04版本的，考虑到版本比较老，就装了server版本的，相比与desktop版本负担更小一些。\n其实就是下一个官方的软件，Raspberry Pi Imager ，直接用读卡器对树莓派的存储卡刷机即可。\n这里是对应的镜像以及教程： 镜像下载 安装教程\n配置网络相关 Ubuntu的server版本有个比较蛋疼的问题就是上网比较困难，如果是用的学校网线，必须要PPPOE拨号才能上网，但是server版本居然没有 net-tools 和 network-manager ，连接WiFi啥的试了很多办法但还是没有什么作用。\n解决办法：用网线直接连接树莓派和有网的路由器，安装 net-tools 和 network-manager ，执行\n$ sudo nmtui 选择 Activate a connect 连接无线的WiFi，执行\n$ sudo ifconfig 查看WiFi对应的IP，至此，树莓派可以摆脱屏幕，我们可以使用电脑进行使用 ssh 连接。\n这里也可以使用网线进行连接，具体操作如下\n用网线连接树莓派和自己的电脑。\n在树莓派的利用 nmtui 选择 Edit a connection ，Add一个Ethernet connect，对IPv4 CONFIGURATION进行设置，首先讲 Automatic 设置为 Manual，设置 Address 为 静态IP 如 192.168.3.2 ，Gateway 设置为 192.168.3.1 。\n","keywords":["树莓派","HP LaserJet","打印机"],"articleBody":"前言 最近基地的打印机突然又好起来了。\n因为基地的打印机型号比较老——HP LaserJet 1020，没有无线打印的功能。所以之前一位学长1 用树莓派配置了打印机的无线打印功能，但是后来发现有一些问题，有时候发送打印请求树莓派无法接收，而且不知道为何，学长之前用的是树莓派自己创建WiFi，连接对应WiFi才能打印，但是这个显然不是最优的解决办法。\n考虑到之间已经配置好基地WiFi，我决定重新配置一下打印功能，使其连接基地WiFi即可实现局域网打印。\n配置过程 查看树莓派内容 通过ssh连接树莓派，发现里面除了Github上的一个开源项目create_ap ，就没有什么其他的内容了，连接屏幕后发现没有任何图像信号，无从下手，因此考虑重新刷机。\n对树莓派进行刷机 把数据备份了一下，看了一下树莓派版本是2015年生产的 Raspberry Pi 3 model B V1.2 ，是老古董了。\n去官网看了一下，因为我对Ubuntu比较熟悉，我计划安装一个 Ubuntu20.04版本的，考虑到版本比较老，就装了server版本的，相比与desktop版本负担更小一些。\n其实就是下一个官方的软件，Raspberry Pi Imager ，直接用读卡器对树莓派的存储卡刷机即可。\n这里是对应的镜像以及教程： 镜像下载 安装教程\n配置网络相关 Ubuntu的server版本有个比较蛋疼的问题就是上网比较困难，如果是用的学校网线，必须要PPPOE拨号才能上网，但是server版本居然没有 net-tools 和 network-manager ，连接WiFi啥的试了很多办法但还是没有什么作用。\n解决办法：用网线直接连接树莓派和有网的路由器，安装 net-tools 和 network-manager ，执行\n$ sudo nmtui 选择 Activate a connect 连接无线的WiFi，执行\n$ sudo ifconfig 查看WiFi对应的IP，至此，树莓派可以摆脱屏幕，我们可以使用电脑进行使用 ssh 连接。\n这里也可以使用网线进行连接，具体操作如下\n用网线连接树莓派和自己的电脑。\n在树莓派的利用 nmtui 选择 Edit a connection ，Add一个Ethernet connect，对IPv4 CONFIGURATION进行设置，首先讲 Automatic 设置为 Manual，设置 Address 为 静态IP 如 192.168.3.2 ，Gateway 设置为 192.168.3.1 。\n在自己电脑利用 nmtui 同上不过设置 Address 为 192.168.3.3 ，只要是位于同一网段即可。\n这时候就可以通过网线进行 ssh 连接了。\n配置cups 以下大多参考：如何正确地用树莓派共享打印机\n大佬言：\n其实，这一步的工作量非常少，因为软件包 CUPS 就是为共享打印机而生。我们要做的只是将打印机用 USB 线缆连接树莓派，然后安装并配置 CUPS。\n然而，事实并非如此。\n换源 在安装之前需要换源，如果不换源的话，安装会十分缓慢，具体的流程可以看上面的blog，因为我们基地的WiFi自带代理，因此这一步我没有做。\n安装驱动及打印程序 首先更新源并安装Hp的打印机驱动 hplip $ sudo apt update $ sudo apt install hplip 然后安装Apple开源的远程打印工具 cups，并配置相应权限 $ sudo apt install cups # Install cups package $ sudo usermod -aG lpadmin pi # Add user to lpadmin group,pi is your user name $ sudo cupsctl --remote-any # open remote access 然后使用在同一局域网的电脑，访问 https://树莓派IP:631，可以进入如下界面，按照下图设置右侧的Server Settings 连接打印机和树莓派，点击Add Printer添加打印机，在弹出的窗口中输入对应的用户信息，使用在上一步中用户组中添加的用户\n然后按着一步步的指引，选择HP LaserJet 1020打印机，然后按照提示，选择和名称对应的驱动，我们会发现 LaserJet 1020 对应驱动会提示：HP laserjet requires proprietary plugin，也就是我们不仅需要这个通用的驱动，而且需要一些额外的插件，打印机才能正常工作。\n查阅资料发现：HP官方已经给出了说明，我们需要查看hplip版本，然后安装对应的驱动插件。\n首先我们查看一下版本，发现是3.20.3版本 $ sudo apt show hplip Package: hplip Version: 3.20.3+dfsg0-2 Priority: optional Section: utils Origin: Ubuntu Maintainer: Ubuntu Developers Original-Maintainer: Debian Printing Team Bugs: https://bugs.launchpad.net/ubuntu/+filebug Installed-Size: 518 kB 然后在 插件列表 中找到 3.20.3 对应的hplip-3.20.3-plugin.run和hplip-3.20.3-plugin.run.asc，使用wget下载到树莓派本地。\n运行 hp-setup -i 使用命令行进行安装，按照提示命令，进行插件的安装。\n[scode type=“yellow”]这里建议提前下好安装，而不是直接联网下载，速度较快，指定路径需要为绝对路径[/scode]\n至此，我们可以尝试使用手机或者电脑搜索打印机来进行打印测试，没有其他意外的话，可以发现打印成功！\n结语 其实这个配置过程远没有这么简单，期间还有很多小问题，但是大致的流程大概就是如上述所示，全写出来可能太啰嗦，大家如果配置过程中遇到更多的疑问，可以在下方评论一起探讨~\n参考链接 What is the HPLIP Binary Plug-In and How Do I Install It? Plugins Other Plugins cups 使用树莓派搭建无线打印机 如何正确地用树莓派共享打印机 学长的博客在这里:\tdykai ↩︎\n","wordCount":"227","inLanguage":"en","datePublished":"2021-07-18T16:03:00Z","dateModified":"2021-07-18T16:03:00Z","author":{"@type":"Person","name":"zzsqwq"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.zzsqwq.cn/posts/198/"},"publisher":{"@type":"Organization","name":"Zs's Blog","logo":{"@type":"ImageObject","url":"https://blog.zzsqwq.cn/images/avatar.png"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.zzsqwq.cn/ accesskey=h title="Zs's Blog (Alt + H)">Zs's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://blog.zzsqwq.cn/about title=About><span>About</span></a></li><li><a href=https://blog.zzsqwq.cn/archives title=Posts><span>Posts</span></a></li><li><a href=https://blog.zzsqwq.cn/friends title=Friends><span>Friends</span></a></li><li><a href=https://blog.zzsqwq.cn/search title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://blog.zzsqwq.cn/>Home</a>&nbsp;»&nbsp;<a href=https://blog.zzsqwq.cn/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">利用树莓派为HP LaserJet 1020配置无线打印功能</h1><div class=post-meta><span title='2021-07-18 16:03:00 +0000 UTC'>July 18, 2021</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;zzsqwq&nbsp;|&nbsp;<a href=https://github.com/zzsqwq/zzsqwq.github.io/tree/master/content/posts/%e5%88%a9%e7%94%a8%e6%a0%91%e8%8e%93%e6%b4%be%e4%b8%baHP-LaserJet-1020%e9%85%8d%e7%bd%ae%e6%97%a0%e7%ba%bf%e6%89%93%e5%8d%b0%e5%8a%9f%e8%83%bd.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#%e5%89%8d%e8%a8%80 aria-label=前言>前言</a></li><li><a href=#%e9%85%8d%e7%bd%ae%e8%bf%87%e7%a8%8b aria-label=配置过程>配置过程</a><ul><li><a href=#%e6%9f%a5%e7%9c%8b%e6%a0%91%e8%8e%93%e6%b4%be%e5%86%85%e5%ae%b9 aria-label=查看树莓派内容>查看树莓派内容</a></li><li><a href=#%e5%af%b9%e6%a0%91%e8%8e%93%e6%b4%be%e8%bf%9b%e8%a1%8c%e5%88%b7%e6%9c%ba aria-label=对树莓派进行刷机>对树莓派进行刷机</a></li><li><a href=#%e9%85%8d%e7%bd%ae%e7%bd%91%e7%bb%9c%e7%9b%b8%e5%85%b3 aria-label=配置网络相关>配置网络相关</a></li><li><a href=#%e9%85%8d%e7%bd%aecups aria-label=配置cups>配置cups</a><ul><li><a href=#%e6%8d%a2%e6%ba%90 aria-label=换源>换源</a></li><li><a href=#%e5%ae%89%e8%a3%85%e9%a9%b1%e5%8a%a8%e5%8f%8a%e6%89%93%e5%8d%b0%e7%a8%8b%e5%ba%8f aria-label=安装驱动及打印程序>安装驱动及打印程序</a></li></ul></li></ul></li><li><a href=#%e7%bb%93%e8%af%ad aria-label=结语>结语</a></li><li><a href=#%e5%8f%82%e8%80%83%e9%93%be%e6%8e%a5 aria-label=参考链接>参考链接</a></li></ul></div></details></div><div class=post-content><h2 id=前言>前言<a hidden class=anchor aria-hidden=true href=#前言>#</a></h2><p>最近基地的打印机突然又好起来了。</p><p>因为基地的打印机型号比较老——HP LaserJet 1020，没有无线打印的功能。所以之前一位学长<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> 用树莓派配置了打印机的无线打印功能，但是后来发现有一些问题，有时候发送打印请求树莓派无法接收，而且不知道为何，学长之前用的是树莓派自己创建WiFi，连接对应WiFi才能打印，但是这个显然不是最优的解决办法。</p><p>考虑到之间已经配置好基地WiFi，我决定重新配置一下打印功能，使其连接基地WiFi即可实现局域网打印。</p><hr><h2 id=配置过程>配置过程<a hidden class=anchor aria-hidden=true href=#配置过程>#</a></h2><h3 id=查看树莓派内容>查看树莓派内容<a hidden class=anchor aria-hidden=true href=#查看树莓派内容>#</a></h3><p>通过ssh连接树莓派，发现里面除了Github上的一个开源项目<a href=https://github.com/oblique/create_ap>create_ap</a> ，就没有什么其他的内容了，连接屏幕后发现没有任何图像信号，无从下手，因此考虑重新刷机。</p><hr><h3 id=对树莓派进行刷机>对树莓派进行刷机<a hidden class=anchor aria-hidden=true href=#对树莓派进行刷机>#</a></h3><p>把数据备份了一下，看了一下树莓派版本是2015年生产的 <code>Raspberry Pi 3 model B V1.2</code> ，是老古董了。</p><p>去官网看了一下，因为我对Ubuntu比较熟悉，我计划安装一个 Ubuntu20.04版本的，考虑到版本比较老，就装了<strong>server</strong>版本的，相比与desktop版本负担更小一些。</p><p>其实就是下一个官方的软件，<code>Raspberry Pi Imager</code> ，直接用读卡器对树莓派的存储卡刷机即可。</p><p>这里是对应的镜像以及教程： <a href=https://ubuntu.com/download/raspberry-pi>镜像下载</a> <a href=https://ubuntu.com/tutorials/how-to-install-ubuntu-desktop-on-raspberry-pi-4#1-overview>安装教程</a></p><hr><h3 id=配置网络相关>配置网络相关<a hidden class=anchor aria-hidden=true href=#配置网络相关>#</a></h3><p>Ubuntu的server版本有个比较蛋疼的问题就是上网比较困难，如果是用的学校网线，必须要PPPOE拨号才能上网，但是server版本居然没有 <code>net-tools</code> 和 <code>network-manager</code> ，连接WiFi啥的试了很多办法但还是没有什么作用。</p><p><strong>解决办法：用网线直接连接树莓派和有网的路由器，安装 <code>net-tools</code> 和 <code>network-manager</code> ，执行</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>$ sudo nmtui
</span></span></code></pre></div><p>选择 <code>Activate a connect </code>连接无线的WiFi，执行</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>$ sudo ifconfig
</span></span></code></pre></div><p>查看WiFi对应的IP，至此，树莓派可以摆脱屏幕，我们可以使用电脑进行使用 <code>ssh</code> 连接。</p><p>这里也可以使用网线进行连接，具体操作如下</p><ol><li><p>用网线连接树莓派和自己的电脑。</p></li><li><p>在树莓派的利用 <code>nmtui</code> 选择 <code>Edit a connection </code>，Add一个Ethernet connect，对IPv4 CONFIGURATION进行设置，首先讲 <code>Automatic</code> 设置为 <code>Manual</code>，设置 <code>Address</code> 为 <strong>静态IP</strong> 如 <code>192.168.3.2</code> ，<code>Gateway</code> 设置为 <code>192.168.3.1</code> 。</p></li><li><p>在自己电脑利用 <code>nmtui</code> 同上不过设置 <code>Address</code> 为 <code>192.168.3.3</code> ，只要是位于同一网段即可。</p></li><li><p>这时候就可以通过网线进行 <code>ssh</code> 连接了。</p></li></ol><hr><h3 id=配置cups>配置cups<a hidden class=anchor aria-hidden=true href=#配置cups>#</a></h3><p>以下大多参考：<a href=https://sspai.com/post/40997>如何正确地用树莓派共享打印机</a></p><p>大佬言：</p><blockquote><p>其实，这一步的工作量非常少，因为软件包 CUPS 就是为共享打印机而生。我们要做的只是将打印机用 USB 线缆连接树莓派，然后安装并配置 CUPS。</p></blockquote><p>然而，事实并非如此。</p><h4 id=换源>换源<a hidden class=anchor aria-hidden=true href=#换源>#</a></h4><p>在安装之前需要换源，如果不换源的话，安装会十分缓慢，具体的流程可以看上面的blog，因为我们基地的WiFi自带代理，因此这一步我没有做。</p><h4 id=安装驱动及打印程序>安装驱动及打印程序<a hidden class=anchor aria-hidden=true href=#安装驱动及打印程序>#</a></h4><ul><li>首先更新源并安装Hp的打印机驱动 <code>hplip</code></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>$ sudo apt update
</span></span><span class=line><span class=cl>$ sudo apt install hplip
</span></span></code></pre></div><ul><li>然后安装Apple开源的远程打印工具 <code>cups</code>，并配置相应权限</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>$ sudo apt install cups  <span class=c1># Install cups package</span>
</span></span><span class=line><span class=cl>$ sudo usermod -aG lpadmin pi <span class=c1># Add user to lpadmin group,pi is your user name</span>
</span></span><span class=line><span class=cl>$ sudo cupsctl --remote-any <span class=c1># open remote access </span>
</span></span></code></pre></div><ul><li>然后使用在同一局域网的电脑，访问 <code>https://树莓派IP:631</code>，可以进入如下界面，按照下图设置右侧的<code>Server Settings</code></li></ul><p><img alt=cups管理页面 loading=lazy src=https://blog.zzsqwq.cn/usr/uploads/2021/07/2334607761.png></p><ul><li><p><strong>连接打印机和树莓派</strong>，点击Add Printer添加打印机，在弹出的窗口中输入对应的用户信息，使用在上一步中用户组中添加的用户</p><p><img alt=cups登录界面 loading=lazy src=https://blog.zzsqwq.cn/usr/uploads/2021/07/3556322742.png></p></li><li><p>然后按着一步步的指引，选择HP LaserJet 1020打印机，然后按照提示，选择和名称对应的驱动，我们会发现 <strong>LaserJet 1020</strong> 对应驱动会提示：HP laserjet requires proprietary plugin，也就是我们不仅需要这个通用的驱动，而且需要一些额外的插件，打印机才能正常工作。</p></li><li><p>查阅资料发现：HP官方已经给出了<a href=https://developers.hp.com/hp-linux-imaging-and-printing/binary_plugin.html>说明</a>，我们需要查看hplip版本，然后安装对应的驱动插件。</p><ul><li>首先我们查看一下版本，发现是3.20.3版本</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>$ sudo apt show hplip 
</span></span><span class=line><span class=cl>Package: hplip
</span></span><span class=line><span class=cl>Version: 3.20.3+dfsg0-2
</span></span><span class=line><span class=cl>Priority: optional
</span></span><span class=line><span class=cl>Section: utils
</span></span><span class=line><span class=cl>Origin: Ubuntu
</span></span><span class=line><span class=cl>Maintainer: Ubuntu Developers &lt;ubuntu-devel-discuss@lists.ubuntu.com&gt;
</span></span><span class=line><span class=cl>Original-Maintainer: Debian Printing Team &lt;debian-printing@lists.debian.org&gt;
</span></span><span class=line><span class=cl>Bugs: https://bugs.launchpad.net/ubuntu/+filebug
</span></span><span class=line><span class=cl>Installed-Size: <span class=m>518</span> kB
</span></span></code></pre></div><ul><li><p>然后在 <a href=https://developers.hp.com/hp-linux-imaging-and-printing/plugins>插件列表</a> 中找到 3.20.3 对应的<code>hplip-3.20.3-plugin.run</code>和<code>hplip-3.20.3-plugin.run.asc</code>，使用wget下载到树莓派本地。</p></li><li><p>运行 <code>hp-setup -i</code> 使用命令行进行安装，按照提示命令，进行插件的安装。</p><p>[scode type=&ldquo;yellow&rdquo;]这里建议提前下好安装，而不是直接联网下载，速度较快，指定路径需要为绝对路径[/scode]</p></li></ul></li><li><p>至此，我们可以尝试使用手机或者电脑搜索打印机来进行打印测试，没有其他意外的话，可以发现打印成功！</p></li></ul><hr><h2 id=结语>结语<a hidden class=anchor aria-hidden=true href=#结语>#</a></h2><p>其实这个配置过程远没有这么简单，期间还有很多小问题，但是大致的流程大概就是如上述所示，全写出来可能太啰嗦，大家如果配置过程中遇到更多的疑问，可以在下方评论一起探讨~</p><h2 id=参考链接>参考链接<a hidden class=anchor aria-hidden=true href=#参考链接>#</a></h2><ul><li><a href=https://developers.hp.com/hp-linux-imaging-and-printing/binary_plugin.html>What is the HPLIP Binary Plug-In and How Do I Install It?</a></li><li><a href=https://developers.hp.com/hp-linux-imaging-and-printing/plugins>Plugins</a></li><li><a href=https://www.openprinting.org/download/printdriver/auxfiles/HP/plugins/>Other Plugins</a></li><li><a href=https://github.com/apple/cups>cups</a></li><li><a href=https://www.jianshu.com/p/d3752c584e01>使用树莓派搭建无线打印机</a></li><li><a href=https://sspai.com/post/40997>如何正确地用树莓派共享打印机</a></li></ul><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>学长的博客在这里: <a href=https://tec.blog.ykai.top/>dykai</a>&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://blog.zzsqwq.cn/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/>树莓派</a></li><li><a href=https://blog.zzsqwq.cn/tags/hp-laserjet/>HP LaserJet</a></li><li><a href=https://blog.zzsqwq.cn/tags/%E6%89%93%E5%8D%B0%E6%9C%BA/>打印机</a></li></ul><nav class=paginav><a class=prev href=https://blog.zzsqwq.cn/posts/201/><span class=title>« Prev</span><br><span>关于Git的一些理解</span>
</a><a class=next href=https://blog.zzsqwq.cn/posts/195/><span class=title>Next »</span><br><span>deepin-wine-qq-9.1.8版本无法正常启动的解决方案</span></a></nav></footer><div class=comments><script>let getTheme=window.localStorage&&window.localStorage.getItem("pref-theme");getTheme=getTheme??"preferred_color_scheme";let s=document.createElement("script");s.src="https://giscus.app/client.js",s.setAttribute("data-repo","zzsqwq/hugo-blog-comment"),s.setAttribute("data-repo-id","R_kgDOGgU1qQ"),s.setAttribute("data-category","Announcements"),s.setAttribute("data-category-id","DIC_kwDOGgU1qc4CSX1m"),s.setAttribute("data-mapping","pathname"),s.setAttribute("data-strict","0"),s.setAttribute("data-reactions-enabled","1"),s.setAttribute("data-emit-metadata","0"),s.setAttribute("data-input-position","top"),s.setAttribute("data-theme",getTheme),s.setAttribute("data-lang",""),s.setAttribute("crossorigin","anonymous"),s.setAttribute("async",""),document.querySelector("div.comments").innerHTML="",document.querySelector("div.comments").appendChild(s)</script></div></article></main><footer class=footer><span>&copy; 2024 <a href=https://blog.zzsqwq.cn/>Zs's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a> | <a href=http://beian.miit.gov.cn/ target=_blank>鲁ICP备2020034310号</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>function sendMessage(e){const t=document.querySelector("iframe.giscus-frame");if(!t)return;t.contentWindow.postMessage({giscus:e},"https://giscus.app")}document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light"),sendMessage({setConfig:{theme:"light"}})):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"),sendMessage({setConfig:{theme:"dark"}}))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>